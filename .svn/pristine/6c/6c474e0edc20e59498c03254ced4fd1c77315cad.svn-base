package com.vip.apitest.utility;

import java.sql.*;

/**
 * Created by Administrator on 2014/6/25.
 */
public class MagentoDB {

    public static String getAvaliableInviteCode(){
        try {
            String inviteCode = null;
            String url = "jdbc:mysql://192.168.201.122:3306/vipfashion_magento";
            String user = "vipshop";
            String password = "dWwkv%+!1cQf$FNy";
            Connection con = DriverManager.getConnection(url, user, password);

            if(!con.isClosed()){
                Statement st = con.createStatement();
                String queryString = "SELECT * FROM mgt_invitecode WHERE status != 1";
                ResultSet rs = st.executeQuery(queryString);

                if(rs.next()) inviteCode = rs.getString("Code");
            }

            return inviteCode;
        }catch(SQLException e){
            e.printStackTrace();
            return null;
        }
    }

    public static String getExistedUser(){
        try {
            String existedUser = null;
            String url = "jdbc:mysql://192.168.201.122:3306/vipfashion_magento";
            String user = "vipshop";
            String password = "dWwkv%+!1cQf$FNy";
            Connection con = DriverManager.getConnection(url, user, password);

            if(!con.isClosed()){
                Statement st = con.createStatement();
                String queryString = "SELECT * FROM vipfashion_magento.mgt_customer_entity where email like \"%vip.com\"";
                ResultSet rs = st.executeQuery(queryString);

                if(rs.next()) existedUser = rs.getString("email");
            }

            return existedUser;
        }catch(SQLException e){
            e.printStackTrace();
            return null;
        }
    }
}
