package com.vip.apitest.luxury.vlife;

import static com.jayway.restassured.RestAssured.given;
import static org.hamcrest.Matchers.equalTo;

import java.security.MessageDigest;
import java.security.NoSuchAlgorithmException;

import org.junit.Test;

import com.vip.apitest.luxury.BaseTestCase;
import com.vip.apitest.luxury.common.CommonMethod;
import com.vip.apitest.utility.MD5Encoder;

public class SystemPushmsTest extends BaseTestCase{

	@Test
	public void testSystemPushms() throws NoSuchAlgorithmException{
	
		System.out.println("获得短信验证码接口");
		String sign = MD5Encoder.encodeByMD5("system" + "pushsms" + "viplux#123@", MessageDigest.getInstance("MD5"));
        given().
            params("sign", sign).
            params("appid", CommonMethod.appid).
            params("phone", "18501775978").
            params("uid", CommonMethod.uid).
            params("token", CommonMethod.token).
        when().
            get(CommonMethod.vlife_uri + "/system/pushsms/").
        then().
        	statusCode(200).
        	body("code", equalTo(1)).
        	body("data",equalTo("发送短信验证码成功"));
	}
}
