package com.vip.apitest.luxury.magento;

import static com.jayway.restassured.RestAssured.given;
import static org.hamcrest.Matchers.equalTo;

import java.util.List;

import org.junit.BeforeClass;
import org.junit.Test;

import com.vip.apitest.luxury.BaseTestCase;
import com.vip.apitest.luxury.common.CommonMethod;

public class AddressUpdateTest extends BaseTestCase{
	NewOrderTest newOrder=new NewOrderTest();
	
	@BeforeClass
	public static void init() throws Exception{
		CommonMethod.getUidAndToken();
	}
	/**
	 * 更新地址
	 * 正例
	 * 
	 */
	@Test
	public void testAddressUpdate(){
		
		List<String> addressId = CommonMethod.getAddressByUser();
		
		String 	addressInfo ="{";
//		String 	addressInfo ="{\"entity_id\" :2,";
//		addressInfo += "\"firstname\":\"superupdate\",";
//		addressInfo += "\"lastname\":\"menupdate\",";
//		addressInfo += "\"city\":\"上海sh\",";
//		addressInfo += "\"telephone\":\"13444444444\",";
		addressInfo += "\"city\":\"上海上海普陀区1\",";
		addressInfo += "\"street\":[\"newhuiroad4681\"],";
//		addressInfo += "\"delivery_time_type\":1,";
		addressInfo += "\"is_default_shipping\":\"true\"}";
		
//		String token=newOrder.getToken("jerry.hou@vipshop.com","cbb4b0621085c0333a42656532b8863d");		
		given().
			body(addressInfo).
			header("accesstoken",CommonMethod.token).
			header("Content-Type", "application/json; charset=utf-8").
		when().
			put("http://shop-mapp.vipfashion.com/api/rest/customers/addresses/" + addressId.get(0)).
		then().
			statusCode(200).
			body("code", equalTo(1));
		
	}

}
